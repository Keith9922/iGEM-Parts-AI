# iGEM Parts AI助手 - 故障排除指南

## 常见错误及解决方案

### 1. "Unexpected token 'A', "Authentica"... is not valid JSON"

**错误原因：**
- API密钥无效或错误
- API端点地址不正确
- 网络连接问题
- API服务暂时不可用

**解决方案：**
1. **检查API密钥**
   - 确认API密钥正确复制，没有多余的空格
   - 验证API密钥是否有效（在对应平台测试）
   - 确认API密钥有足够的余额/额度

2. **检查网络连接**
   - 确保网络连接正常
   - 检查防火墙设置
   - 尝试访问API提供商的网站

3. **验证API设置**
   - 确认选择了正确的AI提供商
   - 检查API端点地址是否正确
   - 确认模型名称正确

### 2. "API密钥无效，请检查密钥是否正确"

**解决方案：**
1. **重新获取API密钥**
   - 登录对应平台重新生成API密钥
   - 确保复制完整的密钥
   - 检查密钥是否过期

2. **检查密钥格式**
   - OpenAI: 以 `sk-` 开头
   - DeepSeek: 以 `sk-` 开头
   - Hugging Face: 以 `hf_` 开头

### 3. "API调用次数超限，请稍后重试"

**解决方案：**
1. **等待一段时间后重试**
2. **检查API使用情况**
3. **考虑升级API计划或使用其他提供商**

### 4. "网络连接失败，请检查网络连接"

**解决方案：**
1. **检查网络连接**
2. **尝试访问其他网站**
3. **检查代理设置**
4. **重启网络设备**

### 5. "AI返回的内容不是有效的JSON格式，请重试"

**解决方案：**
1. **使用API测试功能**
   - 在设置页面点击"测试API连接"按钮
   - 确认API密钥和连接正常

2. **重新尝试搜索**
   - 简化搜索需求描述
   - 使用更具体的术语

3. **检查AI提供商服务状态**
   - 访问对应AI提供商的官方网站
   - 查看服务状态页面

4. **尝试其他AI提供商**
   - 切换到不同的AI提供商
   - 推荐使用Ollama本地模型

5. **查看详细日志**
   - 打开浏览器开发者工具 (F12)
   - 查看Console中的"AI原始响应"日志
   - 了解AI实际返回的内容格式

### 6. "无法解析AI响应，返回默认响应"

**解决方案：**
1. **检查AI响应格式**
   - 查看控制台中的"AI原始响应"日志
   - 确认AI是否返回了有用的信息

2. **调整搜索需求**
   - 使用更具体的生物学术语
   - 避免过于复杂的描述

3. **更换AI提供商**
   - 尝试不同的AI模型
   - 某些模型可能更适合特定任务

4. **验证提取的信息**
   - 即使返回默认响应，插件也会尝试提取有用信息
   - 检查提取的元件信息是否相关



### 8. "历史记录不显示或丢失"

**解决方案：**
1. **检查存储权限**
   - 确认插件有存储权限
   - 检查浏览器设置

2. **手动刷新**
   - 点击历史选项卡刷新显示
   - 重新启动插件

3. **清除并重建**
   - 清除浏览器缓存
   - 重新安装插件

### 9. "侧边栏无法打开或显示异常"

**解决方案：**
1. **检查插件权限**
   - 确认插件有activeTab、windows和sidePanel权限
   - 检查浏览器扩展设置

2. **重新打开插件**
   - 点击插件图标重新打开侧边栏
   - 检查是否在正确的页面

3. **浏览器兼容性**
   - 确保浏览器版本支持侧边栏功能
   - Chrome 114+ 和 Firefox 109+ 支持侧边栏
   - 建议使用最新版本的浏览器

4. **侧边栏位置调整**
   - 如果侧边栏位置不合适，可以手动调整窗口位置
   - 侧边栏会记住上次的位置

## 调试步骤

### 步骤1: 检查浏览器控制台
1. 打开浏览器开发者工具 (F12)
2. 查看Console标签页的错误信息
3. 查看Network标签页的API调用

### 步骤2: 验证API设置
1. 在插件设置中确认API提供商选择正确
2. 验证API密钥格式
3. 测试API密钥有效性

### 步骤3: 测试网络连接
```javascript
// 在浏览器控制台中测试API连接
fetch('https://api.deepseek.com/v1/models', {
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY'
  }
}).then(response => console.log(response.status))
```

### 步骤4: 检查插件权限
1. 确认插件有网络访问权限
2. 检查是否被浏览器阻止

## 各AI提供商特定问题

### DeepSeek
- **免费额度**: 每月有一定免费调用次数
- **速率限制**: 每分钟调用次数限制
- **模型可用性**: 确认选择的模型可用

### Hugging Face
- **模型加载**: 首次调用可能需要等待模型加载
- **免费限制**: 有调用频率限制
- **模型选择**: 确保选择正确的模型名称

### Ollama (本地)
- **服务启动**: 确认Ollama服务正在运行
- **模型下载**: 确认所需模型已下载
- **端口访问**: 确认端口11434可访问

### OpenAI
- **账户余额**: 确认账户有足够余额
- **API限制**: 检查API使用限制
- **模型可用性**: 确认选择的模型可用

## 获取帮助

如果问题仍然存在：

1. **检查日志**: 查看浏览器控制台的详细错误信息
2. **测试API**: 使用curl或Postman测试API调用
3. **联系支持**: 联系对应AI提供商的技术支持
4. **报告问题**: 在项目GitHub页面报告问题

## 预防措施

1. **定期检查API密钥有效性**
2. **监控API使用情况**
3. **备份重要设置**
4. **使用多个AI提供商作为备选** 